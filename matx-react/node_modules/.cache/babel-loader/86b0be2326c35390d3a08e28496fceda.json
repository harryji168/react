{"ast":null,"code":"var _jsxFileName = \"/home/harryji/react/matx-react/src/app/components/MatxVerticalNav/MatxVerticalNavExpansionPanel.jsx\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport { Icon } from '@material-ui/core';\nimport TouchRipple from '@material-ui/core/ButtonBase';\nimport { useLocation } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useEffect } from 'react';\nimport clsx from 'clsx';\nconst useStyles = makeStyles(_ref => {\n  let {\n    palette,\n    ...theme\n  } = _ref;\n  return {\n    expandIcon: {\n      transition: 'transform 0.3s cubic-bezier(0, 0, 0.2, 1) 0ms',\n      transform: 'rotate(90deg)'\n    },\n    collapseIcon: {\n      transition: 'transform 0.3s cubic-bezier(0, 0, 0.2, 1) 0ms',\n      transform: 'rotate(0deg)'\n    },\n    'expansion-panel': {\n      overflow: 'hidden',\n      transition: 'max-height 0.3s cubic-bezier(0, 0, 0.2, 1)'\n    },\n    highlight: {\n      background: palette.primary.main\n    },\n    navItem: {\n      // color: palette.type === \"dark\" ? palette.text.secondary : \"inherit\",\n      '&:hover': {\n        backgroundColor: palette.action.hover\n      }\n    },\n    compactNavItem: {\n      width: 44,\n      overflow: 'hidden',\n      justifyContent: 'center !important',\n      '& $itemText': {\n        display: 'none'\n      },\n      '& $itemIcon': {\n        display: 'none'\n      }\n    },\n    itemIcon: {},\n    itemText: {\n      fontSize: '0.875rem',\n      paddingLeft: '0.8rem'\n    },\n    bulletIcon: {\n      background: palette.text.secondary\n    }\n  };\n});\n\nconst MatxVerticalNavExpansionPanel = _ref2 => {\n  let {\n    item,\n    children,\n    mode\n  } = _ref2;\n  const [collapsed, setCollapsed] = useState(true);\n  const classes = useStyles();\n  const elementRef = useRef(null);\n  const componentHeight = useRef(0);\n  const {\n    pathname\n  } = useLocation();\n  const {\n    name,\n    icon,\n    iconText,\n    badge\n  } = item;\n\n  const handleClick = () => {\n    componentHeight.current = 0;\n    calcaulateHeight(elementRef.current);\n    setCollapsed(!collapsed);\n  };\n\n  const calcaulateHeight = useCallback(node => {\n    if (node.name !== 'child') {\n      for (let child of node.children) {\n        calcaulateHeight(child);\n      }\n    }\n\n    if (node.name === 'child') componentHeight.current += node.scrollHeight;else componentHeight.current += 44; //here 44 is node height\n\n    return;\n  }, []);\n  useEffect(() => {\n    if (!elementRef) return;\n    calcaulateHeight(elementRef.current); // OPEN DROPDOWN IF CHILD IS ACTIVE\n\n    for (let child of elementRef.current.children) {\n      if (child.getAttribute('href') === pathname) {\n        setCollapsed(false);\n      }\n    }\n  }, [pathname, calcaulateHeight]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TouchRipple, {\n    className: clsx({\n      'flex justify-between h-44 border-radius-4 mb-2 w-full pr-4 has-submenu compactNavItem whitespace-pre overflow-hidden': true,\n      [classes.navItem]: true,\n      [classes.compactNavItem]: mode === 'compact',\n      open: !collapsed\n    }),\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, icon && /*#__PURE__*/React.createElement(Icon, {\n    className: \"align-middle text-18 w-36 px-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, icon), iconText && /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx('w-4 h-4 rounded bg-white ml-5 mr-2', classes.bulletIcon),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx('align-middle sidenavHoverShow', classes.itemText),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, name)), badge && /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(\"rounded bg-\".concat(item.badge.color, \" px-1 py-1px\"), 'sidenavHoverShow', classes.itemIcon),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, badge.value), /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx({\n      'item-arrow sidenavHoverShow': true,\n      [classes.itemIcon]: true,\n      [classes.collapseIcon]: collapsed,\n      [classes.expandIcon]: !collapsed\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    fontSize: \"small\",\n    className: \"align-middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, \"chevron_right\"))), /*#__PURE__*/React.createElement(\"div\", {\n    ref: elementRef,\n    className: clsx(classes['expansion-panel'], 'submenu'),\n    style: collapsed ? {\n      maxHeight: '0px'\n    } : {\n      maxHeight: componentHeight.current + 'px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, children));\n};\n\nexport default MatxVerticalNavExpansionPanel;","map":{"version":3,"sources":["/home/harryji/react/matx-react/src/app/components/MatxVerticalNav/MatxVerticalNavExpansionPanel.jsx"],"names":["React","useState","useRef","useCallback","Icon","TouchRipple","useLocation","makeStyles","useEffect","clsx","useStyles","palette","theme","expandIcon","transition","transform","collapseIcon","overflow","highlight","background","primary","main","navItem","backgroundColor","action","hover","compactNavItem","width","justifyContent","display","itemIcon","itemText","fontSize","paddingLeft","bulletIcon","text","secondary","MatxVerticalNavExpansionPanel","item","children","mode","collapsed","setCollapsed","classes","elementRef","componentHeight","pathname","name","icon","iconText","badge","handleClick","current","calcaulateHeight","node","child","scrollHeight","getAttribute","open","color","value","maxHeight"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useCallback } from 'react'\nimport { Icon } from '@material-ui/core'\nimport TouchRipple from '@material-ui/core/ButtonBase'\nimport { useLocation } from 'react-router-dom'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { useEffect } from 'react'\nimport clsx from 'clsx'\n\nconst useStyles = makeStyles(({ palette, ...theme }) => ({\n    expandIcon: {\n        transition: 'transform 0.3s cubic-bezier(0, 0, 0.2, 1) 0ms',\n        transform: 'rotate(90deg)',\n    },\n    collapseIcon: {\n        transition: 'transform 0.3s cubic-bezier(0, 0, 0.2, 1) 0ms',\n        transform: 'rotate(0deg)',\n    },\n    'expansion-panel': {\n        overflow: 'hidden',\n        transition: 'max-height 0.3s cubic-bezier(0, 0, 0.2, 1)',\n    },\n    highlight: {\n        background: palette.primary.main,\n    },\n    navItem: {\n        // color: palette.type === \"dark\" ? palette.text.secondary : \"inherit\",\n        '&:hover': {\n            backgroundColor: palette.action.hover,\n        },\n    },\n    compactNavItem: {\n        width: 44,\n        overflow: 'hidden',\n        justifyContent: 'center !important',\n        '& $itemText': {\n            display: 'none',\n        },\n        '& $itemIcon': {\n            display: 'none',\n        },\n    },\n    itemIcon: {},\n    itemText: {\n        fontSize: '0.875rem',\n        paddingLeft: '0.8rem',\n    },\n    bulletIcon: {\n        background: palette.text.secondary,\n    },\n}))\n\nconst MatxVerticalNavExpansionPanel = ({ item, children, mode }) => {\n    const [collapsed, setCollapsed] = useState(true)\n    const classes = useStyles()\n    const elementRef = useRef(null)\n    const componentHeight = useRef(0)\n    const { pathname } = useLocation()\n    const { name, icon, iconText, badge } = item\n\n    const handleClick = () => {\n        componentHeight.current = 0\n        calcaulateHeight(elementRef.current)\n        setCollapsed(!collapsed)\n    }\n\n    const calcaulateHeight = useCallback((node) => {\n        if (node.name !== 'child') {\n            for (let child of node.children) {\n                calcaulateHeight(child)\n            }\n        }\n\n        if (node.name === 'child') componentHeight.current += node.scrollHeight\n        else componentHeight.current += 44 //here 44 is node height\n        return\n    }, [])\n\n    useEffect(() => {\n        if (!elementRef) return\n\n        calcaulateHeight(elementRef.current)\n\n        // OPEN DROPDOWN IF CHILD IS ACTIVE\n        for (let child of elementRef.current.children) {\n            if (child.getAttribute('href') === pathname) {\n                setCollapsed(false)\n            }\n        }\n    }, [pathname, calcaulateHeight])\n\n    return (\n        <div>\n            <TouchRipple\n                className={clsx({\n                    'flex justify-between h-44 border-radius-4 mb-2 w-full pr-4 has-submenu compactNavItem whitespace-pre overflow-hidden': true,\n                    [classes.navItem]: true,\n                    [classes.compactNavItem]: mode === 'compact',\n                    open: !collapsed,\n                })}\n                onClick={handleClick}\n            >\n                <div className=\"flex items-center\">\n                    {icon && (\n                        <Icon className=\"align-middle text-18 w-36 px-4\">\n                            {icon}\n                        </Icon>\n                    )}\n                    {iconText && (\n                        <div\n                            className={clsx(\n                                'w-4 h-4 rounded bg-white ml-5 mr-2',\n                                classes.bulletIcon\n                            )}\n                        ></div>\n                    )}\n                    <span\n                        className={clsx(\n                            'align-middle sidenavHoverShow',\n                            classes.itemText\n                        )}\n                    >\n                        {name}\n                    </span>\n                </div>\n                {badge && (\n                    <div\n                        className={clsx(\n                            `rounded bg-${item.badge.color} px-1 py-1px`,\n                            'sidenavHoverShow',\n                            classes.itemIcon\n                        )}\n                    >\n                        {badge.value}\n                    </div>\n                )}\n                <div\n                    className={clsx({\n                        'item-arrow sidenavHoverShow': true,\n                        [classes.itemIcon]: true,\n                        [classes.collapseIcon]: collapsed,\n                        [classes.expandIcon]: !collapsed,\n                    })}\n                >\n                    <Icon fontSize=\"small\" className=\"align-middle\">\n                        chevron_right\n                    </Icon>\n                </div>\n            </TouchRipple>\n\n            <div\n                ref={elementRef}\n                className={clsx(classes['expansion-panel'], 'submenu')}\n                style={\n                    collapsed\n                        ? { maxHeight: '0px' }\n                        : { maxHeight: componentHeight.current + 'px' }\n                }\n            >\n                {children}\n            </div>\n        </div>\n    )\n}\n\nexport default MatxVerticalNavExpansionPanel\n"]},"metadata":{},"sourceType":"module"}